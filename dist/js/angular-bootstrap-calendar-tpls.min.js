/**
 * angular-bootstrap-calendar - A pure AngularJS bootstrap themed responsive calendar that can display events and has views for year, month, week and day
 * @version v0.29.0
 * @link https://github.com/mattlewis92/angular-bootstrap-calendar
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("angular"),require("moment"),function(){try{return require("interactjs")}catch(e){}}()):"function"==typeof define&&define.amd?define(["angular","moment","interact"],t):"object"==typeof exports?exports.angularBootstrapCalendarModuleName=t(require("angular"),require("moment"),function(){try{return require("interactjs")}catch(e){}}()):e.angularBootstrapCalendarModuleName=t(e.angular,e.moment,e.interact)}(this,function(e,t,n){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=46)}([function(t,n){t.exports=e},function(e,t,n){function a(e,t){if(d(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var n=t||{},a=n.additionalDigits;a=null==a?m:Number(a);var c=r(e),u=o(c.date,a),v=u.year,p=u.restDateString,g=i(p,v);if(g){var w,h=g.getTime(),y=0;return c.time&&(y=l(c.time)),c.timezone?w=s(c.timezone):(w=new Date(h+y).getTimezoneOffset(),w=new Date(h+y+w*f).getTimezoneOffset()),new Date(h+y+w*f)}return new Date(e)}function r(e){var t,n={},a=e.split(v);if(p.test(a[0])?(n.date=null,t=a[0]):(n.date=a[0],t=a[1]),t){var r=S.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}function o(e,t){var n,a=w[t],r=y[t];if(n=h.exec(e)||r.exec(e)){var o=n[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(n=g.exec(e)||a.exec(e)){var i=n[1];return{year:100*parseInt(i,10),restDateString:e.slice(i.length)}}return{year:null}}function i(e,t){if(null===t)return null;var n,a,r,o;if(0===e.length)return a=new Date(0),a.setUTCFullYear(t),a;if(n=D.exec(e))return a=new Date(0),r=parseInt(n[1],10)-1,a.setUTCFullYear(t,r),a;if(n=k.exec(e)){a=new Date(0);var i=parseInt(n[1],10);return a.setUTCFullYear(t,0,i),a}if(n=C.exec(e)){a=new Date(0),r=parseInt(n[1],10)-1;var l=parseInt(n[2],10);return a.setUTCFullYear(t,r,l),a}if(n=b.exec(e))return o=parseInt(n[1],10)-1,c(t,o);if(n=x.exec(e)){o=parseInt(n[1],10)-1;return c(t,o,parseInt(n[2],10)-1)}return null}function l(e){var t,n,a;if(t=M.exec(e))return(n=parseFloat(t[1].replace(",",".")))%24*u;if(t=T.exec(e))return n=parseInt(t[1],10),a=parseFloat(t[2].replace(",",".")),n%24*u+a*f;if(t=E.exec(e)){n=parseInt(t[1],10),a=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return n%24*u+a*f+1e3*r}return null}function s(e){var t,n;return(t=O.exec(e))?0:(t=$.exec(e))?(n=60*parseInt(t[2],10),"+"===t[1]?-n:n):(t=A.exec(e),t?(n=60*parseInt(t[2],10)+parseInt(t[3],10),"+"===t[1]?-n:n):0)}function c(e,t,n){t=t||0,n=n||0;var a=new Date(0);a.setUTCFullYear(e,0,4);var r=a.getUTCDay()||7,o=7*t+n+1-r;return a.setUTCDate(a.getUTCDate()+o),a}var d=n(23),u=36e5,f=6e4,m=2,v=/[T ]/,p=/:/,g=/^(\d{2})$/,w=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],h=/^(\d{4})/,y=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],D=/^-(\d{2})$/,k=/^-?(\d{3})$/,C=/^-?(\d{2})-?(\d{2})$/,b=/^-?W(\d{2})$/,x=/^-?W(\d{2})-?(\d{1})$/,M=/^(\d{2}([.,]\d*)?)$/,T=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,E=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,S=/([Z+-].*)$/,O=/^(Z)$/,$=/^([+-])(\d{2})$/,A=/^([+-])(\d{2}):?(\d{2})$/;e.exports=a},function(e,t,n){function a(e){var t=r(e);return t.setHours(0,0,0,0),t}var r=n(1);e.exports=a},function(e,t,n){function a(e,t){var n=r(e).getTime(),a=Number(t);return new Date(n+a)}var r=n(1);e.exports=a},function(e,t,n){function a(e,t){var n=r(e),a=r(t);return n.getTime()-a.getTime()}var r=n(1);e.exports=a},function(e,t){},function(e,t,n){function a(e){return n(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./mwlCalendar.js":38,"./mwlCalendarMonth.js":39,"./mwlCalendarYear.js":40,"./mwlDateModifier.js":41,"./mwlDraggable.js":42,"./mwlDroppable.js":43,"./mwlDynamicDirectiveTemplate.js":44,"./mwlElementDimensions.js":45};a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=6},function(e,t,n){function a(e){return n(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./calendarDate.js":47,"./calendarLimitTo.js":48,"./calendarTrustAsHtml.js":49};a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=7},function(e,t,n){function a(e){return n(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./calendarConfig.js":50,"./calendarEventTitle.js":51,"./calendarHelper.js":52,"./calendarTitle.js":53,"./interact.js":54,"./moment.js":55};a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=8},function(e,t,n){function a(e){return n(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./calendar.html":33,"./calendarMonthCell.html":34,"./calendarMonthCellEvents.html":35,"./calendarMonthView.html":36,"./calendarYearView.html":37};a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=9},function(e,t,n){"use strict";function a(e){var t=e.startDate,n=e.days,a=e.excluded;if(a.length<1)return 0;for(var r=t.getDay(),o=0,i=0;i<n;i++)r===X&&(r=0),a.some(function(e){return e===r})&&o++,r++;return o}function r(e){var t=e.event,n=e.offset,r=e.startOfWeek,o=e.excluded,i=t.start<r?r:t.start,l=1;return t.end&&(l=y()(w()(p()(t.end),1),k()(i))),n+l>X&&(l=X-n),l-a({startDate:i,days:l,excluded:o})}function o(e){var t=e.event,n=e.startOfWeek,r=e.excluded,o=void 0===r?[]:r;if(t.start<n)return 0;var i=y()(t.start,n);return i-a({startDate:n,days:i,excluded:o})}function i(e){var t=e.event,n=e.periodStart,a=e.periodEnd,r=t.start,o=t.end||t.start;return r>n&&r<a||(o>n&&o<a||(r<n&&o>a||(!(!U()(r,n)&&!U()(r,a))||!(!U()(o,n)&&!U()(o,a)))))}function l(e){var t=e.events,n=e.periodStart,a=e.periodEnd;return t.filter(function(e){return i({event:e,periodStart:n,periodEnd:a})})}function s(e){var t=e.date,n=k()(new Date);return{date:t,isPast:t<n,isToday:b()(t,n),isFuture:t>n,isWeekend:Q.indexOf(M()(t))>-1}}function c(e){for(var t=e.viewDate,n=e.weekStartsOn,a=e.excluded,r=void 0===a?[]:a,o=E()(t,{weekStartsOn:n}),i=[],l=0;l<X;l++)!function(e){var t=O()(o,e);r.some(function(e){return t.getDay()===e})||i.push(s({date:t}))}(l);return i}function d(e){var t=e.events,n=void 0===t?[]:t,a=e.viewDate,i=e.weekStartsOn,s=e.excluded,c=void 0===s?[]:s;n||(n=[]);var d=E()(a,{weekStartsOn:i}),u=A()(a,{weekStartsOn:i}),f=X-c.length,m=l({events:n,periodStart:d,periodEnd:u}).map(function(e){var t=o({event:e,startOfWeek:d,excluded:c});return{event:e,offset:t,span:r({event:e,offset:t,startOfWeek:d,excluded:c})}}).filter(function(e){return e.offset<f}).filter(function(e){return e.span>0}).map(function(e){return{event:e.event,offset:e.offset,span:e.span,startsBeforeWeek:e.event.start<d,endsAfterWeek:(e.event.end||e.event.start)>u}}).sort(function(e,t){var n=V()(e.event.start,t.event.start);return 0===n?V()(t.event.end||t.event.start,e.event.end||e.event.start):n}),v=[],p=[];return m.forEach(function(e,t){if(-1===p.indexOf(e)){p.push(e);var n=e.span+e.offset,a=m.slice(t+1).filter(function(e){if(e.offset>=n&&n+e.span<=X&&-1===p.indexOf(e))return e.offset-=n,n+=e.span+e.offset,p.push(e),!0});v.push({row:[e].concat(a)})}}),v}function u(e){var t=e.events,n=void 0===t?[]:t,a=e.viewDate,r=e.weekStartsOn,o=e.excluded,i=void 0===o?[]:o;n||(n=[]);for(var c,d=E()(W()(a),{weekStartsOn:r}),u=A()(N()(a),{weekStartsOn:r}),f=l({events:n,periodStart:d,periodEnd:u}),m=[],v=0;v<y()(u,d)+1;v++)!function(e){var t;if(c?(t=k()(K()(c,ee)),c.getTime()===t.getTime()&&(t=k()(K()(c,ee+1))),c=t):t=c=d,!i.some(function(e){return t.getDay()===e})){var n=s({date:t}),r=l({events:f,periodStart:k()(t),periodEnd:p()(t)});n.inMonth=Y()(t,a),n.events=r,n.badgeTotal=r.length,m.push(n)}}();for(var g=X-i.length,w=Math.floor(m.length/g),h=[],v=0;v<w;v++)h.push(v*g);return{rowOffsets:h,totalDaysVisibleInWeek:g,days:m}}function f(e){var t=e.events,n=void 0===t?[]:t,a=e.viewDate,r=e.hourSegments,o=e.dayStart,i=e.dayEnd,s=e.eventWidth,c=e.segmentHeight;n||(n=[]);var d=L()(B()(k()(a),o.hour),o.minute),u=L()(B()(_()(p()(a)),i.hour),i.minute),f=[],m=l({events:n.filter(function(e){return!e.allDay}),periodStart:d,periodEnd:u}).sort(function(e,t){return e.start.valueOf()-t.start.valueOf()}).map(function(e){var t=e.start,n=e.end||t,a=t<d,o=n>u,i=r*c/te,l=0;t>d&&(l+=Z()(t,d)),l*=i;var m=a?d:t,v=o?u:n,p=Z()(v,m);e.end?p*=i:p=c;for(var g=l+p,w=f.filter(function(e){var t=e.top,n=e.top+e.height;return l<n&&n<g||t<=l&&g<=n}),h=0;w.some(function(e){return e.left===h});)h+=s;var y={event:e,height:p,width:s,top:l,left:h,startsBeforeDay:a,endsAfterDay:o};return p>0&&f.push(y),y}).filter(function(e){return e.height>0});return{events:m,width:Math.max.apply(Math,m.map(function(e){return e.left+e.width})),allDayEvents:l({events:n.filter(function(e){return e.allDay}),periodStart:k()(d),periodEnd:p()(u)})}}function m(e){for(var t=e.viewDate,n=e.hourSegments,a=e.dayStart,r=e.dayEnd,o=[],i=L()(B()(k()(t),a.hour),a.minute),l=L()(B()(_()(p()(t)),r.hour),r.minute),s=te/n,c=k()(t),d=0;d<ee;d++){for(var u=[],f=0;f<n;f++){var m=w()(K()(c,d),f*s);m>=i&&m<l&&u.push({date:m,isStart:0===f})}u.length>0&&o.push({segments:u})}return o}Object.defineProperty(t,"__esModule",{value:!0});var v=n(19),p=n.n(v),g=n(13),w=n.n(g),h=n(16),y=n.n(h),D=n(2),k=n.n(D),C=n(24),b=n.n(C),x=n(22),M=n.n(x),T=n(32),E=n.n(T),S=n(11),O=n.n(S),$=n(21),A=n.n($),j=n(18),V=n.n(j),F=n(30),W=n.n(F),H=n(20),N=n.n(H),I=n(25),Y=n.n(I),R=n(26),U=n.n(R),z=n(27),B=n.n(z),q=n(28),L=n.n(q),P=n(29),_=n.n(P),G=n(17),Z=n.n(G),J=n(12),K=n.n(J);t.getWeekViewEventOffset=o,t.getWeekViewHeader=c,t.getWeekView=d,t.getMonthView=u,t.getDayView=f,t.getDayViewHourGrid=m;var Q=[0,6],X=7,ee=24,te=60},function(e,t,n){function a(e,t){var n=r(e),a=Number(t);return n.setDate(n.getDate()+a),n}var r=n(1);e.exports=a},function(e,t,n){function a(e,t){var n=Number(t);return r(e,n*o)}var r=n(3),o=36e5;e.exports=a},function(e,t,n){function a(e,t){var n=Number(t);return r(e,n*o)}var r=n(3),o=6e4;e.exports=a},function(e,t,n){function a(e,t){var n=r(e),a=n.getTime(),o=r(t),i=o.getTime();return a<i?-1:a>i?1:0}var r=n(1);e.exports=a},function(e,t,n){function a(e,t){var n=r(e),a=r(t),l=n.getTime()-n.getTimezoneOffset()*o,s=a.getTime()-a.getTimezoneOffset()*o;return Math.round((l-s)/i)}var r=n(2),o=6e4,i=864e5;e.exports=a},function(e,t,n){function a(e,t){var n=r(e),a=r(t),l=i(n,a),s=Math.abs(o(n,a));return n.setDate(n.getDate()-l*s),l*(s-(i(n,a)===-l))}var r=n(1),o=n(15),i=n(14);e.exports=a},function(e,t,n){function a(e,t){var n=r(e,t)/o;return n>0?Math.floor(n):Math.ceil(n)}var r=n(4),o=6e4;e.exports=a},function(e,t,n){function a(e,t){var n=r(e,t)/1e3;return n>0?Math.floor(n):Math.ceil(n)}var r=n(4);e.exports=a},function(e,t,n){function a(e){var t=r(e);return t.setHours(23,59,59,999),t}var r=n(1);e.exports=a},function(e,t,n){function a(e){var t=r(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}var r=n(1);e.exports=a},function(e,t,n){function a(e,t){var n=t?Number(t.weekStartsOn)||0:0,a=r(e),o=a.getDay(),i=6+(o<n?-7:0)-(o-n);return a.setDate(a.getDate()+i),a.setHours(23,59,59,999),a}var r=n(1);e.exports=a},function(e,t,n){function a(e){return r(e).getDay()}var r=n(1);e.exports=a},function(e,t){function n(e){return e instanceof Date}e.exports=n},function(e,t,n){function a(e,t){var n=r(e),a=r(t);return n.getTime()===a.getTime()}var r=n(2);e.exports=a},function(e,t,n){function a(e,t){var n=r(e),a=r(t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}var r=n(1);e.exports=a},function(e,t,n){function a(e,t){var n=r(e),a=r(t);return n.getTime()===a.getTime()}var r=n(31);e.exports=a},function(e,t,n){function a(e,t){var n=r(e),a=Number(t);return n.setHours(a),n}var r=n(1);e.exports=a},function(e,t,n){function a(e,t){var n=r(e),a=Number(t);return n.setMinutes(a),n}var r=n(1);e.exports=a},function(e,t,n){function a(e){var t=r(e);return t.setSeconds(0,0),t}var r=n(1);e.exports=a},function(e,t,n){function a(e){var t=r(e);return t.setDate(1),t.setHours(0,0,0,0),t}var r=n(1);e.exports=a},function(e,t,n){function a(e){var t=r(e);return t.setMilliseconds(0),t}var r=n(1);e.exports=a},function(e,t,n){function a(e,t){var n=t?Number(t.weekStartsOn)||0:0,a=r(e),o=a.getDay(),i=(o<n?7:0)+o-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}var r=n(1);e.exports=a},function(e,t){e.exports='<div class=cal-context ng-switch=vm.view ng-if=vm.templatesLoaded> <div class="alert alert-danger" ng-switch-default>The value passed to the view attribute of the calendar is not set</div> <div class="alert alert-danger" ng-hide=vm.viewDate>The value passed to view-date attribute of the calendar is not set</div> <mwl-calendar-year events=vm.events view-date=vm.viewDate on-event-click=vm.onEventClick on-event-times-changed=vm.onEventTimesChanged on-timespan-click=vm.onTimespanClick cell-modifier=vm.cellModifier custom-template-urls=vm.customTemplateUrls template-scope=vm.templateScope ng-switch-when=year> </mwl-calendar-year> <mwl-calendar-month events=vm.events view-date=vm.viewDate on-event-click=vm.onEventClick on-event-times-changed=vm.onEventTimesChanged on-timespan-click=vm.onTimespanClick on-date-range-select=vm.onDateRangeSelect cell-modifier=vm.cellModifier custom-template-urls=vm.customTemplateUrls template-scope=vm.templateScope draggable-auto-scroll=vm.draggableAutoScroll ng-switch-when=month> </mwl-calendar-month> </div> '},function(e,t){e.exports='<div mwl-droppable on-drop="vm.handleEventDrop(dropData.event, day.date, dropData.draggedFromDate)" class="cal-month-day {{ day.cssClass }}" ng-class="{\n    \'cal-day-outmonth\': !day.inMonth,\n    \'cal-day-inmonth\': day.inMonth,\n  }"> <span class=pull-right data-cal-date ng-bind=day.label> </span> <ng-include src="vm.customTemplateUrls.calendarMonthCellEvents || vm.calendarConfig.templates.calendarMonthCellEvents"></ng-include> </div> '},function(e,t){e.exports='<div class=events-list ng-show="day.events.length > 0"> <a ng-repeat="event in day.events | orderBy:\'startsAt\' track by event.calendarEventId" href=javascript:; ng-click="$event.stopPropagation(); vm.onEventClick(event)" class="pull-left event" ng-class=event.cssClass ng-style="{backgroundColor: event.color.primary}" ng-mouseenter="vm.highlightEvent(event, true)" ng-mouseleave="vm.highlightEvent(event, false)" tooltip-append-to-body=true uib-tooltip-html="vm.calendarEventTitle.monthViewTooltip(event) | calendarTrustAsHtml" mwl-draggable="event.draggable === true" drop-data="{event: event, draggedFromDate: day.date.toDate()}" auto-scroll=vm.draggableAutoScroll> </a> </div> '},function(e,t){e.exports='<div class="cal-row-fluid cal-row-head"> <div class=cal-cell1 ng-repeat="day in vm.weekDays track by $index" ng-bind=day></div> </div> <div class=cal-month-box> <div ng-repeat="rowOffset in vm.monthOffsets track by rowOffset"> <div class="cal-row-fluid cal-before-eventlist"> <div ng-repeat="day in vm.view | calendarLimitTo:7:rowOffset track by $index" ng-init="dayIndex = vm.view.indexOf(day)" class="cal-cell1 cal-cell {{ day.highlightClass }}" ng-style="{backgroundColor: day.backgroundColor}" ng-click="vm.dayClicked(day, false, $event)" ng-class="{pointer: day.events.length > 0}"> <ng-include src="vm.customTemplateUrls.calendarMonthCell || vm.calendarConfig.templates.calendarMonthCell"></ng-include> </div> </div> </div> </div>'},function(e,t){e.exports='<div class=cal-year-box> <div ng-repeat="rowOffset in [0, 2, 4, 6, 8, 10] track by rowOffset"> <div class="row cal-before-eventlist"> <div class="col-md-6 col-xs-12 cal-cell {{ day.cssClass }}" ng-repeat="month in vm.view | calendarLimitTo:2:rowOffset track by $index" ng-init="monthIndex = vm.view.indexOf(month)" ng-class="{pointer: month.events.length > 0, \'cal-day-today\': month.isToday}" mwl-droppable on-drop="vm.handleEventDrop(dropData.event, month.date)"> <div class=text-center data-cal-date ng-click=vm.calendarCtrl.dateClicked(month.date) ng-bind=month.label> </div> <mwl-calendar events=month.events view="::\'month\'" view-date=::month.date on-event-click=vm.onEventClick on-event-times-changed=vm.onEventTimesChanged on-timespan-click=vm.onTimespanClick on-date-range-select=vm.onDateRangeSelect cell-modifier=vm.cellModifier template-scope=vm.templateScope dont-watch> </mwl-calendar> </div> </div> </div> </div> '},function(e,t,n){"use strict";var a=n(0),r="Bootstrap calendar:";a.module("mwl.calendar").controller("MwlCalendarCtrl",["$scope","$log","$timeout","$attrs","moment","calendarTitle","calendarHelper",function(e,t,n,o,i,l,s){var c=this;c.changeView=function(e,t){c.view=e,c.viewDate=t},c.dateClicked=function(e){var t=i(e).toDate(),n={year:"month",month:"day",week:"day"};!1!==c.onViewChangeClick({calendarDate:t,calendarNextView:n[c.view]})&&c.changeView(n[c.view],t)},c.$onInit=function(){function d(e){e.startsAt?a.isDate(e.startsAt)||t.warn(r,"Event startsAt should be a javascript date object. Do `new Date(event.startsAt)` to fix it.",e):t.warn(r,"Event is missing the startsAt field",e),e.endsAt&&(a.isDate(e.endsAt)||t.warn(r,"Event endsAt should be a javascript date object. Do `new Date(event.endsAt)` to fix it.",e),i(e.startsAt).isAfter(i(e.endsAt))&&t.warn(r,"Event cannot start after it finishes",e))}function u(){l[c.view]&&a.isDefined(o.viewTitle)&&(c.viewTitle=l[c.view](c.viewDate)),c.events.forEach(function(e,t){d(e),e.calendarEventId=t});var t=i(c.viewDate),r=!0;f.clone().startOf(c.view).isSame(t.clone().startOf(c.view))&&!f.isSame(t)&&c.view===m&&(r=!1),f=t,m=c.view,r&&n(function(){e.$broadcast("calendar.refreshView")})}c.events=c.events||[];var f=i(c.viewDate),m=c.view;s.loadTemplates().then(function(){c.templatesLoaded=!0,c.dontWatch||e.$watchGroup(["vm.viewDate","vm.view"],u),e.$watch("vm.events",u,!0)}).catch(function(e){t.error("Could not load all calendar templates",e)})},a.version.minor<5&&c.$onInit()}]).directive("mwlCalendar",function(){return{template:'<div mwl-dynamic-directive-template name="calendar" overrides="vm.customTemplateUrls"></div>',restrict:"E",scope:{events:"=",view:"=",viewTitle:"=?",viewDate:"=",customTemplateUrls:"=?",draggableAutoScroll:"=?",onEventClick:"=",onEventTimesChanged:"=",onTimespanClick:"=",onDateRangeSelect:"=?",onViewChangeClick:"&",cellModifier:"&",dayViewStart:"@",dayViewEnd:"@",dayViewSplit:"@",dayViewEventChunkSize:"@",dayViewEventWidth:"@",templateScope:"=?",dayViewTimePosition:"@",dontWatch:"@"},controller:"MwlCalendarCtrl as vm",bindToController:!0}})},function(e,t,n){"use strict";n(0).module("mwl.calendar").controller("MwlCalendarMonthCtrl",["$scope","moment","calendarHelper","calendarConfig","calendarEventTitle",function(e,t,n,a,r){var o=this;o.calendarConfig=a,o.calendarEventTitle=r,o.openRowIndex=null,e.$on("calendar.refreshView",function(){o.weekDays=n.getWeekDayNames();var e=n.getMonthView(o.events,o.viewDate,o.cellModifier);o.view=e.days,o.monthOffsets=e.rowOffsets}),o.dayClicked=function(e,t,n){!t&&o.onTimespanClick&&(o.onTimespanClick(e.date.toDate(),e,n),n&&n.defaultPrevented)},o.highlightEvent=function(e,t){o.view.forEach(function(n){delete n.highlightClass,delete n.backgroundColor,t&&n.events.indexOf(e)>-1&&(n.backgroundColor=e.color?e.color.secondary:"")})},o.handleEventDrop=function(e,a,r){var i=t(e.startsAt).date(t(a).date()).month(t(a).month()).year(t(a).year()),l=n.adjustEndDateFromStartDiff(e.startsAt,i,e.endsAt);o.onEventTimesChanged(e,a,i.toDate(),l?l.toDate():null,r)},o.getWeekNumberLabel=function(e){var t=e.date.clone().add(1,"day").isoWeek();return"function"==typeof a.i18nStrings.weekNumber?a.i18nStrings.weekNumber({weekNumber:t}):a.i18nStrings.weekNumber.replace("{week}",t)},o.onDragSelectStart=function(e){o.dateRangeSelect||(o.dateRangeSelect={startDate:e.date,endDate:e.date})},o.onDragSelectMove=function(e){o.dateRangeSelect&&(o.dateRangeSelect.endDate=e.date)},o.onDragSelectEnd=function(e){o.dateRangeSelect.endDate=e.date,o.dateRangeSelect.endDate>o.dateRangeSelect.startDate&&o.onDateRangeSelect({calendarRangeStartDate:o.dateRangeSelect.startDate.clone().startOf("day").toDate(),calendarRangeEndDate:o.dateRangeSelect.endDate.clone().endOf("day").toDate()}),delete o.dateRangeSelect}}]).directive("mwlCalendarMonth",function(){return{template:'<div mwl-dynamic-directive-template name="calendarMonthView" overrides="vm.customTemplateUrls"></div>',restrict:"E",require:"^mwlCalendar",scope:{events:"=",viewDate:"=",onEventClick:"=",onEventTimesChanged:"=",onDateRangeSelect:"=",onTimespanClick:"=",cellModifier:"=",slideBoxDisabled:"=",customTemplateUrls:"=?",templateScope:"=",draggableAutoScroll:"="},controller:"MwlCalendarMonthCtrl as vm",link:function(e,t,n,a){e.vm.calendarCtrl=a},bindToController:!0}})},function(e,t,n){"use strict";n(0).module("mwl.calendar").controller("MwlCalendarYearCtrl",["$scope","moment","calendarHelper",function(e,t,n){var a=this;a.openMonthIndex=null,e.$on("calendar.refreshView",function(){a.view=n.getYearView(a.events,a.viewDate,a.cellModifier)}),a.monthClicked=function(e,t,n){!t&&a.monthClicked&&(a.onTimespanClick(e.date.toDate(),e,n),n&&n.defaultPrevented)},a.handleEventDrop=function(e,r){var o=t(e.startsAt).month(t(r).month()).year(t(r).year()),i=n.adjustEndDateFromStartDiff(e.startsAt,o,e.endsAt);a.onEventTimesChanged(e,r,o.toDate(),i?i.toDate():null)}}]).directive("mwlCalendarYear",function(){return{template:'<div mwl-dynamic-directive-template name="calendarYearView" overrides="vm.customTemplateUrls"></div>',restrict:"E",require:"^mwlCalendar",scope:{events:"=",viewDate:"=",onEventClick:"=",onEventTimesChanged:"=",onTimespanClick:"=",cellModifier:"=",slideBoxDisabled:"=",customTemplateUrls:"=?",templateScope:"="},controller:"MwlCalendarYearCtrl as vm",link:function(e,t,n,a){e.vm.calendarCtrl=a},bindToController:!0}})},function(e,t,n){"use strict";var a=n(0);a.module("mwl.calendar").controller("MwlDateModifierCtrl",["$element","$attrs","$scope","moment",function(e,t,n,r){function o(){a.isDefined(t.setToToday)?i.date=new Date:a.isDefined(t.increment)?i.date=r(i.date).add(1,i.increment).toDate():a.isDefined(t.decrement)&&(i.date=r(i.date).subtract(1,i.decrement).toDate()),n.$apply()}var i=this;e.bind("click",o),n.$on("$destroy",function(){e.unbind("click",o)})}]).directive("mwlDateModifier",function(){return{restrict:"A",controller:"MwlDateModifierCtrl as vm",scope:{date:"=",increment:"=",decrement:"="},bindToController:!0}})},function(e,t,n){"use strict";var a=n(0);a.module("mwl.calendar").controller("MwlDraggableCtrl",["$element","$scope","$window","$parse","$attrs","$timeout","interact",function(e,t,n,r,o,i,l){function s(e,t){return e.css("-ms-transform",t).css("-webkit-transform",t).css("transform",t)}if(l){var c,d;o.snapGrid&&(d=r(o.snapGrid)(t),c={targets:[l.createSnapGrid(d)]});var u=r(o.autoScroll)(t);void 0===u&&(u=!0),l(e[0]).draggable({autoScroll:u,snap:c,onstart:function(e){a.element(e.target).addClass("dragging-active"),e.target.dropData=r(o.dropData)(t),e.target.style.pointerEvents="none",o.onDragStart&&(r(o.onDragStart)(t),t.$apply())},onmove:function(e){var i=a.element(e.target),l=(parseFloat(i.attr("data-x"))||0)+(e.dx||0),c=(parseFloat(i.attr("data-y"))||0)+(e.dy||0);switch(r(o.axis)(t)){case"x":c=0;break;case"y":l=0}"static"===n.getComputedStyle(i[0]).position&&i.css("position","relative"),s(i,"translate("+l+"px, "+c+"px)").css("z-index",50).attr("data-x",l).attr("data-y",c),o.onDrag&&(r(o.onDrag)(t,{x:l,y:c}),t.$apply())},onend:function(e){var n=a.element(e.target),l=n.attr("data-x"),c=n.attr("data-y");e.target.style.pointerEvents="auto",o.onDragEnd&&(r(o.onDragEnd)(t,{x:l,y:c}),t.$apply()),i(function(){s(n,"").css("z-index","auto").removeAttr("data-x").removeAttr("data-y").removeClass("dragging-active")})}}).styleCursor(!1),t.$on("$destroy",function(){l(e[0]).unset()})}}]).directive("mwlDraggable",function(){return{restrict:"A",controller:"MwlDraggableCtrl"}})},function(e,t,n){"use strict";var a=n(0);a.module("mwl.calendar").controller("MwlDroppableCtrl",["$element","$scope","$parse","$attrs","interact",function(e,t,n,r,o){if(o){var i=r.dropActiveClass||"drop-active";o(e[0]).dropzone({ondragenter:function(e){a.element(e.target).addClass(i)},ondragleave:function(e){a.element(e.target).removeClass(i)},ondropdeactivate:function(e){a.element(e.target).removeClass(i)},ondrop:function(e){e.relatedTarget.dropData&&(n(r.onDrop)(t,{dropData:e.relatedTarget.dropData}),t.$apply())}}),t.$on("$destroy",function(){o(e[0]).unset()})}}]).directive("mwlDroppable",function(){return{restrict:"A",controller:"MwlDroppableCtrl"}})},function(e,t,n){"use strict";var a=n(0);a.module("mwl.calendar").controller("MwlDynamicDirectiveTemplateCtrl",["$compile","$scope","$attrs","$element","$templateCache","$log","calendarConfig",function(e,t,n,r,o,i,l){t.$watch(n.overrides,function(s){var c=l.templates[n.name];s&&a.isObject(s)&&s[n.name]&&(o.get(s[n.name])?c=s[n.name]:i.warn("Bootstrap Calendar","The custom template for "+s[n.name]+' was not found in the template cache. Please ensure it is pre-loaded via a script tag <script type="text/ng-template" id="'+s[n.name]+'">Custom template content<\/script> or via a tool such as https://www.npmjs.com/package/gulp-angular-templatecache'));var d=o.get(c);r.html(d),e(r.contents())(t)})}]).directive("mwlDynamicDirectiveTemplate",function(){return{restrict:"A",controller:"MwlDynamicDirectiveTemplateCtrl"}})},function(e,t,n){"use strict";var a=n(0);a.module("mwl.calendar").controller("MwlElementDimensionsCtrl",["$element","$scope","$parse","$attrs","$window",function(e,t,n,r,o){function i(){n(r.mwlElementDimensions).assign(t,{width:e[0].offsetWidth-1,height:e[0].offsetHeight}),t.$applyAsync()}var l=a.element(o);l.bind("resize",i),i(),t.$on("$destroy",function(){l.unbind("resize",i)})}]).directive("mwlElementDimensions",function(){return{restrict:"A",controller:"MwlElementDimensionsCtrl"}})},function(e,t,n){"use strict";function a(e){e.keys().forEach(e)}n(5);var r=n(0),o={},i=n(9);i.keys().forEach(function(e){var t=e.replace("./",""),n="mwl/"+t,a=t.replace(".html","");o[a]={cacheTemplateName:n,template:i(e)}}),e.exports=r.module("mwl.calendar",[]).config(["calendarConfig",function(e){r.forEach(o,function(t,n){e.templates[n]||(e.templates[n]=t.cacheTemplateName)})}]).run(["$templateCache","$interpolate",function(e,t){r.forEach(o,function(n){if(!e.get(n.cacheTemplateName)){var a=n.template.replace("{{",t.startSymbol()).replace("}}",t.endSymbol());e.put(n.cacheTemplateName,a)}})}]).name,a(n(6)),a(n(7)),a(n(8))},function(e,t,n){"use strict";n(0).module("mwl.calendar").filter("calendarDate",["calendarHelper","calendarConfig",function(e,t){function n(n,a,r){return!0===r&&(a=t.dateFormats[a]),e.formatDate(n,a)}return n.$stateful=!0,n}])},function(e,t,n){"use strict";var a=n(0);a.module("mwl.calendar").filter("calendarLimitTo",["limitToFilter",function(e){return a.version.minor>=4?e:function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):parseInt(t),isNaN(t)?e:(a.isNumber(e)&&(e=e.toString()),a.isArray(e)||a.isString(e)?(n=!n||isNaN(n)?0:parseInt(n),n=n<0&&n>=-e.length?e.length+n:n,t>=0?e.slice(n,n+t):0===n?e.slice(t,e.length):e.slice(Math.max(0,n+t),n)):e)}}])},function(e,t,n){"use strict";n(0).module("mwl.calendar").filter("calendarTrustAsHtml",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}])},function(e,t,n){"use strict";n(0).module("mwl.calendar").constant("calendarConfig",{allDateFormats:{angular:{date:{hour:"ha",day:"d MMM",month:"MMMM",weekDay:"EEEE",time:"HH:mm",datetime:"MMM d, h:mm a"},title:{day:"EEEE d MMMM, yyyy",week:"Week {week} of {year}",month:"MMMM yyyy",year:"yyyy"}},moment:{date:{hour:"ha",day:"D MMM",month:"MMMM",weekDay:"dddd",time:"HH:mm",datetime:"MMM D, h:mm a"},title:{day:"dddd D MMMM, YYYY",week:"Week {week} of {year}",month:"MMMM YYYY",year:"YYYY"}}},get dateFormats(){return this.allDateFormats[this.dateFormatter].date},get titleFormats(){return this.allDateFormats[this.dateFormatter].title},dateFormatter:"angular",showTimesOnWeekView:!1,displayAllMonthEvents:!0,i18nStrings:{weekNumber:"Week {week}"},templates:{},colorTypes:{info:{primary:"#1e90ff",secondary:"#d1e8ff"},important:{primary:"#ad2121",secondary:"#fae3e3"},warning:{primary:"#e3bc08",secondary:"#fdf1ba"},inverse:{primary:"#1b1b1b",secondary:"#c1c1c1"},special:{primary:"#800080",secondary:"#ffe6ff"},success:{primary:"#006400",secondary:"#caffca"}}})},function(e,t,n){"use strict";n(0).module("mwl.calendar").factory("calendarEventTitle",["calendarDateFilter",function(e){function t(t){return t.title+" ("+e(t.startsAt,"datetime",!0)+")"}function n(t){return t.title+" ("+e(t.startsAt,"time",!0)+")"}function a(t){return e(t.startsAt,"time",!0)+" - "+t.title}return{yearView:t,monthView:n,monthViewTooltip:a}}])},function(e,t,n){"use strict";var a=n(0),r=n(10);a.module("mwl.calendar").factory("calendarHelper",["$q","$templateRequest","dateFilter","moment","calendarConfig",function(e,t,n,a,o){function i(e,t){if("angular"===o.dateFormatter)return n(a(e).toDate(),t);if("moment"===o.dateFormatter)return a(e).format(t);throw new Error("Unknown date formatter: "+o.dateFormatter)}function l(e,t,n){if(!n)return n;var r=a(t).diff(a(e));return a(n).add(r)}function s(e,t,n){var r=a(e.start),o=a(e.end),i=a(n);if(t){switch(t){case"year":r.set({year:i.year()});break;case"month":r.set({year:i.year(),month:i.month()});break;default:throw new Error("Invalid value ("+t+") given for recurs on. Can only be year or month.")}o=l(e.start,r,o)}return{start:r,end:o}}function c(e,t,n){t=a(t),n=a(n);var r=s({start:e.startsAt,end:e.endsAt||e.startsAt},e.recursOn,t),o=r.start,i=r.end;return o.isAfter(t)&&o.isBefore(n)||i.isAfter(t)&&i.isBefore(n)||o.isBefore(t)&&i.isAfter(n)||o.isSame(t)||i.isSame(n)}function d(e,t,n){return e.filter(function(e){return c(e,t,n)})}function u(e,t,n){return d(n,a(e).startOf(t),a(e).endOf(t))}function f(e){return e.filter(function(e){return!1!==e.incrementsBadgeTotal}).length}function m(){for(var e=[],t=0;t<7;)e.push(i(a().weekday(t++),o.dateFormats.weekDay));return e}function v(e,t,n){for(var r=[],l=u(t,"year",e),s=a(t).startOf("year"),c=0;c<12;){var m=s.clone(),v=m.clone().endOf("month"),p=d(l,m,v),g={label:i(m,o.dateFormats.month),isToday:m.isSame(a().startOf("month")),events:p,date:m,badgeTotal:f(p)};n({calendarCell:g}),r.push(g),s.add(1,"month"),c++}return r}function p(e,t){return e.start=t.start.toDate(),e.endsAt&&(e.end=t.end.toDate()),e}function g(e,t,n){e.forEach(function(e){p(e,s({start:a(e.startsAt),end:a(e.endsAt||e.startsAt)},e.recursOn,a(t).startOf("month")))});var i=r.getMonthView({events:e,viewDate:t,weekStartsOn:a().startOf("week").day()});return i.days=i.days.map(function(e){return e.date=a(e.date),e.label=e.date.date(),e.badgeTotal=f(e.events),o.displayAllMonthEvents||e.inMonth||(e.events=[]),n({calendarCell:e}),e}),e.forEach(function(e){delete e.start,delete e.end}),i}function w(e,t){var n=r.getWeekViewHeader({viewDate:t,weekStartsOn:a().startOf("week").day()}).map(function(e){return e.date=a(e.date),e.weekDayLabel=i(e.date,o.dateFormats.weekDay),e.dayLabel=i(e.date,o.dateFormats.day),e}),l=a(t).startOf("week"),c=a(t).endOf("week");return{days:n,eventRows:r.getWeekView({viewDate:t,weekStartsOn:a().startOf("week").day(),events:d(e,l,c).map(function(e){var t=a(l).startOf("day"),n=s({start:a(e.startsAt),end:a(e.endsAt||e.startsAt)},e.recursOn,t),r={originalEvent:e,start:n.start.toDate()};return e.endsAt&&(r.end=n.end.toDate()),r})}).map(function(e){return e.row=e.row.map(function(e){return e.event=e.event.originalEvent,e}),e})}}function h(e,t,n,o,i,l){var c=(n||"00:00").split(":"),d=(o||"23:59").split(":"),u=r.getDayView({events:e.map(function(e){return p(e,s({start:a(e.startsAt),end:a(e.endsAt||e.startsAt)},e.recursOn,a(t).startOf("day")))}),viewDate:t,hourSegments:60/i,dayStart:{hour:c[0],minute:c[1]},dayEnd:{hour:d[0],minute:d[1]},eventWidth:l?+l:150,segmentHeight:30});return e.forEach(function(e){delete e.start,delete e.end}),u}function y(e,t,n,o,i){var l=w(e,t),s=[],c=[];return l.eventRows.forEach(function(e){e.row.forEach(function(e){c.push(e.event)})}),l.days.forEach(function(e){var t=c.filter(function(t){return a(t.startsAt).startOf("day").isSame(a(e.date).startOf("day"))}),r=h(t,e.date,n,o,i).events;s=s.concat(r)}),l.eventRows=[{row:s.map(function(e){var n=e.event;return{event:n,top:e.top,offset:r.getWeekViewEventOffset({event:{start:n.startsAt,end:n.endsAt},startOfWeek:a(t).startOf("week").toDate()})}})}],l}function D(e,t,n){var r=a(e||"00:00","HH:mm"),o=a(t||"23:59","HH:mm"),i=60/n*30;return o.diff(r,"minutes")/60*i+3}function k(){var n=Object.keys(o.templates).map(function(e){var n=o.templates[e];return t(n)});return e.all(n)}return{getWeekDayNames:m,getYearView:v,getMonthView:g,getWeekView:w,getDayView:h,getWeekViewWithTimes:y,getDayViewHeight:D,adjustEndDateFromStartDiff:l,formatDate:i,loadTemplates:k,eventIsInPeriod:c}}])},function(e,t,n){"use strict";n(0).module("mwl.calendar").factory("calendarTitle",["calendarConfig","calendarHelper",function(e,t){function n(n){return t.formatDate(n,e.titleFormats.month)}function a(n){return t.formatDate(n,e.titleFormats.year)}return{month:n,year:a}}])},function(e,t,n){"use strict";var a,r=n(0);try{a=n(57)}catch(e){a=null}r.module("mwl.calendar").constant("interact",a)},function(e,t,n){"use strict";var a=n(0),r=n(56);a.module("mwl.calendar").constant("moment",r)},function(e,n){e.exports=t},function(e,t){if(void 0===n){var a=new Error('Cannot find module "undefined"');throw a.code="MODULE_NOT_FOUND",a}e.exports=n}])});
//# sourceMappingURL=angular-bootstrap-calendar-tpls.min.js.map